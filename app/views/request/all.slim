h1 请求总览
table.ui.celled.compact.definition.table
  p 当前人数：{{totalPassengers}} / {{maxPassengers}}
  div style="display: none;"
    | {{totalPassengers}} / {{maxPassengers}}
    p
      | {{selected}}
    p
      | {{all}}
  thead
    tr
      th 
      th 地点
      th 人数
  tbody
    - @reqs.each do |r|
      tr v-bind:class="{disabled: disabled(#{r.id}) }"
        td
          input type="checkbox" v-model="selected" :value="#{r.id}"
        td= r.place
        td= r.passengers

= form_for :volunteer, '/volunteer/take', :id => 'take' do |f|
    tr
      th
      th colspan="4"
        input name="id" v-model="selectedData" style="display: none;"
        =f.submit "接受申请"
script
  | var app = new Vue({
      el: '#app',
      data: {
        message: 'Hello Vue!',
        maxPassengers: #{@user.max_passengers},
        currentPassengers: #{@user.passengers_count},
        selected: [],
        all: #{all}
      },
      
      computed: {
        addedPassengers: function() {
          var loc = 0;
          for(var i = 0; i < this.selected.length; i ++) { 
            loc += this.all[this.selected[i]]
          }
          return loc;
        },
        
        totalPassengers: function() {
          return this.currentPassengers + this.addedPassengers;
        },
        
        selectedData : function() {
          return "[" + this.selected + "]";
        }
      },
      
      methods: {
        disabled : function(id) {
          if (this.selected.indexOf(id) > -1) return false;
          var res = this.maxPassengers - this.totalPassengers;
          var rest = this.all[id];
          if (rest > res)
            return true;
          return false;
        },
        
        selected : function(id) {
          return this.selected.indexOf(id) > -1;
        }
        
        
      }
    })
== @all
/ script
/   | alert("hi")
